<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Get Google ID Token for Postman</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
      }
      #token {
        width: 100%;
        height: 200px;
        margin-top: 10px;
        padding: 10px;
        font-family: monospace;
        font-size: 12px;
      }
      .container {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
      }
      h1 {
        color: #333;
      }
      .instructions {
        background: white;
        padding: 15px;
        margin: 20px 0;
        border-left: 4px solid #4285f4;
      }
      .copy-btn {
        background: #4285f4;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 4px;
        margin-top: 10px;
      }
      .copy-btn:hover {
        background: #357ae8;
      }
      .success {
        color: green;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üîë Get Google ID Token for Postman Testing</h1>

      <div class="instructions">
        <h3>H∆∞·ªõng d·∫´n:</h3>
        <ol>
          <li>
            Thay <code>YOUR_GOOGLE_CLIENT_ID</code> b√™n d∆∞·ªõi b·∫±ng Client ID th·ª±c
            c·ªßa b·∫°n
          </li>
          <li>M·ªü file HTML n√†y tr√™n browser</li>
          <li>Click n√∫t "Sign in with Google"</li>
          <li>Ch·ªçn t√†i kho·∫£n Google</li>
          <li>Copy idToken v√† paste v√†o Postman</li>
        </ol>
      </div>

      <!-- Google Sign-In Button -->
      <div
        id="g_id_onload"
        data-client_id="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
        data-callback="handleCredentialResponse"
        data-auto_prompt="false"
      ></div>
      <div
        class="g_id_signin"
        data-type="standard"
        data-size="large"
        data-theme="outline"
        data-text="sign_in_with"
        data-shape="rectangular"
        data-logo_alignment="left"
      ></div>

      <h3 style="margin-top: 30px">üìã ID Token (Copy this to Postman):</h3>
      <textarea
        id="token"
        placeholder="ID Token s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y sau khi b·∫°n ƒëƒÉng nh·∫≠p..."
      ></textarea>
      <br />
      <button class="copy-btn" onclick="copyToken()">Copy to Clipboard</button>
      <div id="copyStatus" class="success"></div>

      <div class="instructions" style="margin-top: 20px">
        <h3>üìÆ Test trong Postman:</h3>
        <pre
          style="
            background: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
          "
        >
POST http://localhost:3000/api/auth/google
Content-Type: application/json

{
  "idToken": "paste_token_here"
}</pre
        >
      </div>
    </div>

    <script>
      function handleCredentialResponse(response) {
        const token = response.credential;
        document.getElementById("token").value = token;
        console.log("‚úÖ ID Token received:", token);

        // Hi·ªÉn th·ªã th√¥ng b√°o
        alert(
          "‚úÖ ID Token ƒë√£ ƒë∆∞·ª£c l·∫•y th√†nh c√¥ng! B·∫°n c√≥ th·ªÉ copy v√† d√πng trong Postman."
        );
      }

      function copyToken() {
        const tokenInput = document.getElementById("token");
        if (!tokenInput.value) {
          alert("‚ùå Ch∆∞a c√≥ token! Vui l√≤ng ƒëƒÉng nh·∫≠p v·ªõi Google tr∆∞·ªõc.");
          return;
        }

        tokenInput.select();
        document.execCommand("copy");

        const status = document.getElementById("copyStatus");
        status.textContent = "‚úÖ ƒê√£ copy v√†o clipboard!";
        setTimeout(() => {
          status.textContent = "";
        }, 3000);
      }

      // Prevent default form submission
      window.onload = function () {
        console.log(
          "üìÑ Page loaded. Please sign in with Google to get ID Token."
        );
      };
    </script>
  </body>
</html>
